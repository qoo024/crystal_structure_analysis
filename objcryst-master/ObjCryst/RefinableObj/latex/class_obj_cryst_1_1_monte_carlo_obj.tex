\hypertarget{class_obj_cryst_1_1_monte_carlo_obj}{}\section{Obj\+Cryst\+::Monte\+Carlo\+Obj Class Reference}
\label{class_obj_cryst_1_1_monte_carlo_obj}\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}


Base object for Monte-\/\+Carlo Global Optimization methods.  




{\ttfamily \#include $<$Global\+Optim\+Obj.\+h$>$}



Inheritance diagram for Obj\+Cryst\+::Monte\+Carlo\+Obj\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{class_obj_cryst_1_1_monte_carlo_obj__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Obj\+Cryst\+::Monte\+Carlo\+Obj\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a6ef446b8361a8c53d016f213f0d1e17f}\label{class_obj_cryst_1_1_monte_carlo_obj_a6ef446b8361a8c53d016f213f0d1e17f}} 
\mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a6ef446b8361a8c53d016f213f0d1e17f}{Monte\+Carlo\+Obj}} (const string name=\char`\"{}\char`\"{})
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a503419b4b79fdb5ae41928656a888ec8}{Monte\+Carlo\+Obj}} (const bool internal\+Use\+Only)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a41bb7821705ad4f96318f6af75f7c067}\label{class_obj_cryst_1_1_monte_carlo_obj_a41bb7821705ad4f96318f6af75f7c067}} 
virtual \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a41bb7821705ad4f96318f6af75f7c067}{$\sim$\+Monte\+Carlo\+Obj}} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_ac094251dbd02a4709dd4afb29d8454e5}{Set\+Algorithm\+Simul\+Annealing}} (const Annealing\+Schedule schedule\+Temp, const R\+E\+AL t\+Max, const R\+E\+AL t\+Min, const Annealing\+Schedule schedule\+Mutation=A\+N\+N\+E\+A\+L\+I\+N\+G\+\_\+\+C\+O\+N\+S\+T\+A\+NT, const R\+E\+AL mut\+Max=16., const R\+E\+AL mut\+Min=.\+125, const long nb\+Trial\+Retry=0, const R\+E\+AL min\+Cost\+Retry=0.)
\begin{DoxyCompactList}\small\item\em Set the refinement method to simulated Annealing. Note that Parellel Tempering is more efficient to get out of local minima, so you sould rather use that method. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a54c7ad3cb78846c82c65d6a6db27801a}{Set\+Algorithm\+Parall\+Tempering}} (const Annealing\+Schedule schedule\+Temp, const R\+E\+AL t\+Max, const R\+E\+AL t\+Min, const Annealing\+Schedule schedule\+Mutation=A\+N\+N\+E\+A\+L\+I\+N\+G\+\_\+\+C\+O\+N\+S\+T\+A\+NT, const R\+E\+AL mut\+Max=16., const R\+E\+AL mut\+Min=.\+125)
\begin{DoxyCompactList}\small\item\em Set the refinement method to Parallel Tempering. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_ad036c6dbffb9a65ae1a7545418f16c73}{Optimize}} (long \&nb\+Steps, const bool silent=false, const R\+E\+AL finalcost=0, const R\+E\+AL max\+Time=-\/1)
\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a86a5e1222f1a836da730f7d17b752021}{Multi\+Run\+Optimize}} (long \&nb\+Cycle, long \&nb\+Steps, const bool silent=false, const R\+E\+AL finalcost=0, const R\+E\+AL max\+Time=-\/1)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a80c15a8ba385e2e0f3e8a52451898fde}\label{class_obj_cryst_1_1_monte_carlo_obj_a80c15a8ba385e2e0f3e8a52451898fde}} 
void {\bfseries Run\+Simulated\+Annealing} (long \&nb\+Steps, const bool silent=false, const R\+E\+AL finalcost=0, const R\+E\+AL max\+Time=-\/1)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a707045b814adb938fa5a1d8485074d21}\label{class_obj_cryst_1_1_monte_carlo_obj_a707045b814adb938fa5a1d8485074d21}} 
void {\bfseries Run\+Parallel\+Tempering} (long \&nb\+Steps, const bool silent=false, const R\+E\+AL finalcost=0, const R\+E\+AL max\+Time=-\/1)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_aaac316fdf4bd4ffb7b3d0b28586a7c71}\label{class_obj_cryst_1_1_monte_carlo_obj_aaac316fdf4bd4ffb7b3d0b28586a7c71}} 
void {\bfseries Run\+Random\+L\+S\+Q\+Method} (long \&nb\+Cycle)
\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a540de9354fcb298fca0458f041238f6e}{X\+M\+L\+Output}} (ostream \&os, int indent=0) const
\begin{DoxyCompactList}\small\item\em Output a description of the object in X\+ML format to a stream. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a1b8be4dded36d1d2f882674decc5649c}{X\+M\+L\+Input}} (istream \&is, const \mbox{\hyperlink{class_obj_cryst_1_1_x_m_l_cryst_tag}{X\+M\+L\+Cryst\+Tag}} \&tag)
\begin{DoxyCompactList}\small\item\em Input in X\+ML format from a stream, restoring the set of refined objects and the associated cost functions. Note that the corresponding objects must have been loaded in memory before, else shit happens. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a4a7c01d648dd833aa9f596b37aa337be}\label{class_obj_cryst_1_1_monte_carlo_obj_a4a7c01d648dd833aa9f596b37aa337be}} 
virtual const string \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a4a7c01d648dd833aa9f596b37aa337be}{Get\+Class\+Name}} () const
\begin{DoxyCompactList}\small\item\em Get the name for this class type. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_ae1607ed98bb6ec0707659bfcf084838e}\label{class_obj_cryst_1_1_monte_carlo_obj_ae1607ed98bb6ec0707659bfcf084838e}} 
\mbox{\hyperlink{class_obj_cryst_1_1_l_s_q_num_obj}{L\+S\+Q\+Num\+Obj}} \& \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_ae1607ed98bb6ec0707659bfcf084838e}{Get\+L\+S\+Q\+Obj}} ()
\begin{DoxyCompactList}\small\item\em Access to the builtin L\+SQ optimization object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a05d97046a898f798430571715b4d1afa}\label{class_obj_cryst_1_1_monte_carlo_obj_a05d97046a898f798430571715b4d1afa}} 
const \mbox{\hyperlink{class_obj_cryst_1_1_l_s_q_num_obj}{L\+S\+Q\+Num\+Obj}} \& \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a05d97046a898f798430571715b4d1afa}{Get\+L\+S\+Q\+Obj}} () const
\begin{DoxyCompactList}\small\item\em Access to the builtin L\+SQ optimization object. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_acd2853f973a5b26b5fac47e3152aec4b}{Init\+L\+SQ}} (const bool use\+Full\+Powder\+Pattern\+Profile=true)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a6bf556666f593138f1320706b2c6933b}\label{class_obj_cryst_1_1_monte_carlo_obj_a6bf556666f593138f1320706b2c6933b}} 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a6bf556666f593138f1320706b2c6933b}{New\+Configuration}} (const \mbox{\hyperlink{class_obj_cryst_1_1_ref_par_type}{Ref\+Par\+Type}} $\ast$type=gp\+Ref\+Par\+Type\+Obj\+Cryst)
\begin{DoxyCompactList}\small\item\em Make a random change in the configuration. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a450204f6b700c18f7a596a7412a4166e}\label{class_obj_cryst_1_1_monte_carlo_obj_a450204f6b700c18f7a596a7412a4166e}} 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a450204f6b700c18f7a596a7412a4166e}{Init\+Options}} ()
\begin{DoxyCompactList}\small\item\em Initialization of options. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_af5ab36ab840b6654f6738c30712b2f95}{m\+Global\+Optim\+Type}}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a96805488cd133249ec1c24c67d3a2dda}\label{class_obj_cryst_1_1_monte_carlo_obj_a96805488cd133249ec1c24c67d3a2dda}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a96805488cd133249ec1c24c67d3a2dda}{m\+Current\+Cost}}
\begin{DoxyCompactList}\small\item\em Current value of the cost function. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_ac782f38b1343464aa3db886873798107}{m\+Save\+Tracked\+Data}}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a17997726361536481a041fb5736fedb9}\label{class_obj_cryst_1_1_monte_carlo_obj_a17997726361536481a041fb5736fedb9}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a17997726361536481a041fb5736fedb9}{m\+Temperature}}
\begin{DoxyCompactList}\small\item\em Current temperature for annealing. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a1256bc3d6ceae83f8b36de6141a8945d}\label{class_obj_cryst_1_1_monte_carlo_obj_a1256bc3d6ceae83f8b36de6141a8945d}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a1256bc3d6ceae83f8b36de6141a8945d}{m\+Temperature\+Max}}
\begin{DoxyCompactList}\small\item\em Beginning temperature for annealing. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a8ba61158d22cd66be193aabcd41dd9f6}\label{class_obj_cryst_1_1_monte_carlo_obj_a8ba61158d22cd66be193aabcd41dd9f6}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a8ba61158d22cd66be193aabcd41dd9f6}{m\+Temperature\+Min}}
\begin{DoxyCompactList}\small\item\em Lower temperature. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_ae630f1608e3be9b01159d0780980eb08}\label{class_obj_cryst_1_1_monte_carlo_obj_ae630f1608e3be9b01159d0780980eb08}} 
\mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_ae630f1608e3be9b01159d0780980eb08}{m\+Annealing\+Schedule\+Temp}}
\begin{DoxyCompactList}\small\item\em Schedule for the annealing. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_af1a7aeb7079f01175fbef95b31ca47af}\label{class_obj_cryst_1_1_monte_carlo_obj_af1a7aeb7079f01175fbef95b31ca47af}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_af1a7aeb7079f01175fbef95b31ca47af}{m\+Temperature\+Gamma}}
\begin{DoxyCompactList}\small\item\em Gamma for the \textquotesingle{}gamma\textquotesingle{} temperature schedule. \end{DoxyCompactList}\item 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_afb02263e40ec89621bffe34ca859be96}{m\+Mutation\+Amplitude}}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_ae56181bde6b87eeeb24a6fdd1428a0b9}\label{class_obj_cryst_1_1_monte_carlo_obj_ae56181bde6b87eeeb24a6fdd1428a0b9}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_ae56181bde6b87eeeb24a6fdd1428a0b9}{m\+Mutation\+Amplitude\+Max}}
\begin{DoxyCompactList}\small\item\em Mutation amplitude at the beginning of the optimization. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a6f4e6631d2079c0ac3f82a271a6ad3ec}\label{class_obj_cryst_1_1_monte_carlo_obj_a6f4e6631d2079c0ac3f82a271a6ad3ec}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a6f4e6631d2079c0ac3f82a271a6ad3ec}{m\+Mutation\+Amplitude\+Min}}
\begin{DoxyCompactList}\small\item\em Mutation amplitude at the end of the optimization. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a5bb4e03ae2221be34131f4c0f108271e}\label{class_obj_cryst_1_1_monte_carlo_obj_a5bb4e03ae2221be34131f4c0f108271e}} 
\mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a5bb4e03ae2221be34131f4c0f108271e}{m\+Annealing\+Schedule\+Mutation}}
\begin{DoxyCompactList}\small\item\em Schedule for the annealing. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a1cfbd1b4fc984a06a02c5102a9dcfcd3}\label{class_obj_cryst_1_1_monte_carlo_obj_a1cfbd1b4fc984a06a02c5102a9dcfcd3}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a1cfbd1b4fc984a06a02c5102a9dcfcd3}{m\+Mutation\+Amplitude\+Gamma}}
\begin{DoxyCompactList}\small\item\em Gamma for the \textquotesingle{}gamma\textquotesingle{} Mutation amplitude schedule. \end{DoxyCompactList}\item 
long \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a22e972f1cb525f9dc5336fd1f47fa93b}{m\+Nb\+Trial\+Retry}}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a9a45d65ee6522c4dc159a91fdb4c1661}\label{class_obj_cryst_1_1_monte_carlo_obj_a9a45d65ee6522c4dc159a91fdb4c1661}} 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a9a45d65ee6522c4dc159a91fdb4c1661}{m\+Min\+Cost\+Retry}}
\begin{DoxyCompactList}\small\item\em Cost to reach unless an automatic randomization and retry is done. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a36b4c13151172e24108d6578d63d1125}\label{class_obj_cryst_1_1_monte_carlo_obj_a36b4c13151172e24108d6578d63d1125}} 
\mbox{\hyperlink{class_obj_cryst_1_1_l_s_q_num_obj}{L\+S\+Q\+Num\+Obj}} \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a36b4c13151172e24108d6578d63d1125}{m\+L\+SQ}}
\begin{DoxyCompactList}\small\item\em Least squares object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a3d6e159362a2f93d5a2883e60f1710d8}\label{class_obj_cryst_1_1_monte_carlo_obj_a3d6e159362a2f93d5a2883e60f1710d8}} 
\mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} \mbox{\hyperlink{class_obj_cryst_1_1_monte_carlo_obj_a3d6e159362a2f93d5a2883e60f1710d8}{m\+Auto\+L\+SQ}}
\begin{DoxyCompactList}\small\item\em Option to run automatic least-\/squares refinements. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Base object for Monte-\/\+Carlo Global Optimization methods. 

The algorithm is quite simple, whith two type of optimizations, either simulated Annealing or Parallel Tempering, the latter being recommanded for most real-\/world optimizations. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a503419b4b79fdb5ae41928656a888ec8}\label{class_obj_cryst_1_1_monte_carlo_obj_a503419b4b79fdb5ae41928656a888ec8}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!MonteCarloObj@{MonteCarloObj}}
\index{MonteCarloObj@{MonteCarloObj}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{MonteCarloObj()}{MonteCarloObj()}}
{\footnotesize\ttfamily Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+Monte\+Carlo\+Obj (\begin{DoxyParamCaption}\item[{const bool}]{internal\+Use\+Only }\end{DoxyParamCaption})}

Constructor. Using internal\+Use\+Only=true will avoid registering the the object to any registry, and thus (for example) no display will be created, nor will this object be automatically be saved. Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_a503419b4b79fdb5ae41928656a888ec8_cgraph}
\end{center}
\end{figure}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_acd2853f973a5b26b5fac47e3152aec4b}\label{class_obj_cryst_1_1_monte_carlo_obj_acd2853f973a5b26b5fac47e3152aec4b}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!InitLSQ@{InitLSQ}}
\index{InitLSQ@{InitLSQ}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{InitLSQ()}{InitLSQ()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+Init\+L\+SQ (\begin{DoxyParamCaption}\item[{const bool}]{use\+Full\+Powder\+Pattern\+Profile = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Prepare m\+L\+SQ for least-\/squares refinement during the global optimization


\begin{DoxyParams}{Parameters}
{\em use\+Full\+Powder\+Pattern\+Profile} & if true, the refinement will use the full profile version of powder patterns, otherwise only the integrated powder pattern will be used (faster). \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_acd2853f973a5b26b5fac47e3152aec4b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_acd2853f973a5b26b5fac47e3152aec4b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a86a5e1222f1a836da730f7d17b752021}\label{class_obj_cryst_1_1_monte_carlo_obj_a86a5e1222f1a836da730f7d17b752021}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!MultiRunOptimize@{MultiRunOptimize}}
\index{MultiRunOptimize@{MultiRunOptimize}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{MultiRunOptimize()}{MultiRunOptimize()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+Multi\+Run\+Optimize (\begin{DoxyParamCaption}\item[{long \&}]{nb\+Cycle,  }\item[{long \&}]{nb\+Steps,  }\item[{const bool}]{silent = {\ttfamily false},  }\item[{const R\+E\+AL}]{finalcost = {\ttfamily 0},  }\item[{const R\+E\+AL}]{max\+Time = {\ttfamily -\/1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Launch optimization for multiple runs of N steps 
\begin{DoxyParams}{Parameters}
{\em nb\+Cycle} & the number of runs (cycles) to perform. The structure is randomized at the beginning of each cycle. If nb\+Cycle==-\/1, this will run indefinitely. The nb\+Cycle parameter is decreased after each run. \\
\hline
{\em nb\+Steps} & the number of steps to go. This number is modified (decreases!) as the refinement goes on. \\
\hline
{\em silent} & \+: if true, absolutely no message should be printed (except debugging) \\
\hline
{\em finalcost} & the optimization will stop if overall cost fallse below this value \\
\hline
{\em max\+Time} & the optimization will stop after the given number of seconds has been spent optimizing (ignored if $<$0). \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{class_obj_cryst_1_1_optimization_obj_aa53575dbda2ec3f561bed934beb4ca6f}{Obj\+Cryst\+::\+Optimization\+Obj}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_a86a5e1222f1a836da730f7d17b752021_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_ad036c6dbffb9a65ae1a7545418f16c73}\label{class_obj_cryst_1_1_monte_carlo_obj_ad036c6dbffb9a65ae1a7545418f16c73}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!Optimize@{Optimize}}
\index{Optimize@{Optimize}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{Optimize()}{Optimize()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+Optimize (\begin{DoxyParamCaption}\item[{long \&}]{nb\+Steps,  }\item[{const bool}]{silent = {\ttfamily false},  }\item[{const R\+E\+AL}]{finalcost = {\ttfamily 0},  }\item[{const R\+E\+AL}]{max\+Time = {\ttfamily -\/1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Launch optimization (a single run) for N steps 
\begin{DoxyParams}{Parameters}
{\em nb\+Steps} & the number of steps to go. This number is modified (decreases!) as the refinement goes on. \\
\hline
{\em silent} & \+: if true, absolutely no message should be printed (except debugging) \\
\hline
{\em finalcost} & the optimization will stop if overall cost fallse below this value \\
\hline
{\em max\+Time} & the optimization will stop after the given number of seconds has been spent optimizing (ignored if $<$0). \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{class_obj_cryst_1_1_optimization_obj_a08c77dc6ec80f63bf067ef2968a0b6dc}{Obj\+Cryst\+::\+Optimization\+Obj}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_ad036c6dbffb9a65ae1a7545418f16c73_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a54c7ad3cb78846c82c65d6a6db27801a}\label{class_obj_cryst_1_1_monte_carlo_obj_a54c7ad3cb78846c82c65d6a6db27801a}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!SetAlgorithmParallTempering@{SetAlgorithmParallTempering}}
\index{SetAlgorithmParallTempering@{SetAlgorithmParallTempering}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{SetAlgorithmParallTempering()}{SetAlgorithmParallTempering()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+Set\+Algorithm\+Parall\+Tempering (\begin{DoxyParamCaption}\item[{const Annealing\+Schedule}]{schedule\+Temp,  }\item[{const R\+E\+AL}]{t\+Max,  }\item[{const R\+E\+AL}]{t\+Min,  }\item[{const Annealing\+Schedule}]{schedule\+Mutation = {\ttfamily ANNEALING\+\_\+CONSTANT},  }\item[{const R\+E\+AL}]{mut\+Max = {\ttfamily 16.},  }\item[{const R\+E\+AL}]{mut\+Min = {\ttfamily .125} }\end{DoxyParamCaption})}



Set the refinement method to Parallel Tempering. 

The refinement begins at max and finishes at min temperature.


\begin{DoxyParams}{Parameters}
{\em schedule\+Temp} & temperature schedule \\
\hline
{\em t\+Max,t\+Min} & Max and Min temperatures. See Annealing\+Schedule. \\
\hline
{\em schedule\+Mutation} & the mutation schedule. For each new configuration, the variation of each refinable parameter is less than its Refinable\+Par\+::\+Global\+Optim\+Step(), multiplied by the current mutation amplitude. By default this mutation is equal to 1., but making bigger steps can be a good idea at the beginning of the refinement. Thus you can choose a schedule for the amplitude, exactly like for the temperature. \\
\hline
{\em mut\+Max,mut\+Min} & Max and Min mutation amplitudes. \\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{Warning}
do not use the \textquotesingle{}smart\textquotesingle{} option for the temperature schedule, it is not yet implemented. Later it will be used to set the temperatures as a function of the amplitude schedule, so that we keep accepted move between 30\% and 70\%. 
\end{DoxyWarning}
\begin{DoxyNote}{Note}
this will be removed when we separate the different algorithms in different classes. 
\end{DoxyNote}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_ac094251dbd02a4709dd4afb29d8454e5}\label{class_obj_cryst_1_1_monte_carlo_obj_ac094251dbd02a4709dd4afb29d8454e5}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!SetAlgorithmSimulAnnealing@{SetAlgorithmSimulAnnealing}}
\index{SetAlgorithmSimulAnnealing@{SetAlgorithmSimulAnnealing}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{SetAlgorithmSimulAnnealing()}{SetAlgorithmSimulAnnealing()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+Set\+Algorithm\+Simul\+Annealing (\begin{DoxyParamCaption}\item[{const Annealing\+Schedule}]{schedule\+Temp,  }\item[{const R\+E\+AL}]{t\+Max,  }\item[{const R\+E\+AL}]{t\+Min,  }\item[{const Annealing\+Schedule}]{schedule\+Mutation = {\ttfamily ANNEALING\+\_\+CONSTANT},  }\item[{const R\+E\+AL}]{mut\+Max = {\ttfamily 16.},  }\item[{const R\+E\+AL}]{mut\+Min = {\ttfamily .125},  }\item[{const long}]{nb\+Trial\+Retry = {\ttfamily 0},  }\item[{const R\+E\+AL}]{min\+Cost\+Retry = {\ttfamily 0.} }\end{DoxyParamCaption})}



Set the refinement method to simulated Annealing. Note that Parellel Tempering is more efficient to get out of local minima, so you sould rather use that method. 

The refinement begins at max and finishes at min temperature.


\begin{DoxyParams}{Parameters}
{\em schedule\+Temp} & temperature schedule. See Annealing\+Schedule. \\
\hline
{\em t\+Max,t\+Min} & Max and Min temperatures. \\
\hline
{\em schedule\+Mutation} & the mutation schedule. For each new configuration, the variation of each refinable parameter is less than its Refinable\+Par\+::\+Global\+Optim\+Step(), multiplied by the current mutation amplitude. By default this mutation is equal to 1., but making bigger steps is a good idea at the beginning of the refinement (for higher temperatures). See Annealing\+Schedule. See Annealing\+Schedule. \\
\hline
{\em mut\+Max,mut\+Min} & Max and Min mutation amplitudes. \\
\hline
{\em min\+Cost\+Retry,nb\+Trial\+Retry} & if after nb\+Trial\+Retry, the cost function is still above min\+Cost\+Retry, then start again from a random configuration. No randomization is made if nb\+Trial\+Retry $<$= 0. \\
\hline
{\em max\+Nb\+Trial\+Since\+Best} & if more than max\+Nb\+Trial\+Since\+Best trials have been made since the best configuration was recorded, then revert to that configuration. This should be large enough to have an ergodic search (the default is never to revert..)\\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{Warning}
do not use the \textquotesingle{}smart\textquotesingle{} option for the temperature schedule, it is not yet implemented. Later it will be used to set the temperatures as a function of the amplitude schedule, so that we accept between 30\% and 70\% moves. 
\end{DoxyWarning}
\begin{DoxyNote}{Note}
this will be removed when we separate the different algorithms in different classes. 
\end{DoxyNote}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a1b8be4dded36d1d2f882674decc5649c}\label{class_obj_cryst_1_1_monte_carlo_obj_a1b8be4dded36d1d2f882674decc5649c}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!XMLInput@{XMLInput}}
\index{XMLInput@{XMLInput}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{XMLInput()}{XMLInput()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+X\+M\+L\+Input (\begin{DoxyParamCaption}\item[{istream \&}]{is,  }\item[{const \mbox{\hyperlink{class_obj_cryst_1_1_x_m_l_cryst_tag}{X\+M\+L\+Cryst\+Tag}} \&}]{tag }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Input in X\+ML format from a stream, restoring the set of refined objects and the associated cost functions. Note that the corresponding objects must have been loaded in memory before, else shit happens. 



Implements \mbox{\hyperlink{class_obj_cryst_1_1_optimization_obj_aa07aee60f56780e2c56fb20f4a5f48a8}{Obj\+Cryst\+::\+Optimization\+Obj}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_a1b8be4dded36d1d2f882674decc5649c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a540de9354fcb298fca0458f041238f6e}\label{class_obj_cryst_1_1_monte_carlo_obj_a540de9354fcb298fca0458f041238f6e}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!XMLOutput@{XMLOutput}}
\index{XMLOutput@{XMLOutput}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{XMLOutput()}{XMLOutput()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::\+X\+M\+L\+Output (\begin{DoxyParamCaption}\item[{ostream \&}]{os,  }\item[{int}]{indent = {\ttfamily 0} }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Output a description of the object in X\+ML format to a stream. 

This saves the list of refined object and the cost functions, as well as options for the refinement. The refined objects are {\bfseries{not}} saved, so this must be done somewhere else (they must be reloaded before this object). 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_optimization_obj_a6b7726159bb0d5dad1c7eebaee78f53a}{Obj\+Cryst\+::\+Optimization\+Obj}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_monte_carlo_obj_a540de9354fcb298fca0458f041238f6e_cgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_af5ab36ab840b6654f6738c30712b2f95}\label{class_obj_cryst_1_1_monte_carlo_obj_af5ab36ab840b6654f6738c30712b2f95}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!mGlobalOptimType@{mGlobalOptimType}}
\index{mGlobalOptimType@{mGlobalOptimType}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{mGlobalOptimType}{mGlobalOptimType}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::m\+Global\+Optim\+Type\hspace{0.3cm}{\ttfamily [protected]}}

Method used for the global optimization. Should be removed when we switch to using several classes for different algorithms. \mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_afb02263e40ec89621bffe34ca859be96}\label{class_obj_cryst_1_1_monte_carlo_obj_afb02263e40ec89621bffe34ca859be96}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!mMutationAmplitude@{mMutationAmplitude}}
\index{mMutationAmplitude@{mMutationAmplitude}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{mMutationAmplitude}{mMutationAmplitude}}
{\footnotesize\ttfamily R\+E\+AL Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::m\+Mutation\+Amplitude\hspace{0.3cm}{\ttfamily [protected]}}

Mutation amplitude. From .25 to 64. Random moves will have a maximum amplitude equal to this amplitude multiplied by the Global optimization step defined for each \mbox{\hyperlink{class_obj_cryst_1_1_refinable_par}{Refinable\+Par}}. Large amplitude should be used at the beginning of the refinement (high temeratures). \mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_a22e972f1cb525f9dc5336fd1f47fa93b}\label{class_obj_cryst_1_1_monte_carlo_obj_a22e972f1cb525f9dc5336fd1f47fa93b}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!mNbTrialRetry@{mNbTrialRetry}}
\index{mNbTrialRetry@{mNbTrialRetry}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{mNbTrialRetry}{mNbTrialRetry}}
{\footnotesize\ttfamily long Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::m\+Nb\+Trial\+Retry\hspace{0.3cm}{\ttfamily [protected]}}

Number of trials before testing if we are below the given minimum cost. If $<$=0, this will be ignored. \mbox{\Hypertarget{class_obj_cryst_1_1_monte_carlo_obj_ac782f38b1343464aa3db886873798107}\label{class_obj_cryst_1_1_monte_carlo_obj_ac782f38b1343464aa3db886873798107}} 
\index{ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}!mSaveTrackedData@{mSaveTrackedData}}
\index{mSaveTrackedData@{mSaveTrackedData}!ObjCryst::MonteCarloObj@{ObjCryst::MonteCarloObj}}
\subsubsection{\texorpdfstring{mSaveTrackedData}{mSaveTrackedData}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_obj_cryst_1_1_ref_obj_opt}{Ref\+Obj\+Opt}} Obj\+Cryst\+::\+Monte\+Carlo\+Obj\+::m\+Save\+Tracked\+Data\hspace{0.3cm}{\ttfamily [protected]}}

Option to save the evolution of tracked data (cost functions, likelihhod, individual parameters,...) 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Global\+Optim\+Obj.\+h\item 
Global\+Optim\+Obj.\+cpp\end{DoxyCompactItemize}

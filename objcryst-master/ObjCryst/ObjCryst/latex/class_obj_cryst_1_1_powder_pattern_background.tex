\hypertarget{class_obj_cryst_1_1_powder_pattern_background}{}\section{Obj\+Cryst\+::Powder\+Pattern\+Background Class Reference}
\label{class_obj_cryst_1_1_powder_pattern_background}\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}


Phase to compute a background contribution to a powder pattern using an interpolation. Currently only linear interpolation is available. (in the works\+: cubic spline interpolation background)  




{\ttfamily \#include $<$Powder\+Pattern.\+h$>$}



Inheritance diagram for Obj\+Cryst\+::Powder\+Pattern\+Background\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{class_obj_cryst_1_1_powder_pattern_background__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Obj\+Cryst\+::Powder\+Pattern\+Background\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=323pt]{class_obj_cryst_1_1_powder_pattern_background__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a46496ee29e07d0c8949bfc45d77a4c3e}\label{class_obj_cryst_1_1_powder_pattern_background_a46496ee29e07d0c8949bfc45d77a4c3e}} 
{\bfseries Powder\+Pattern\+Background} (const \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background}{Powder\+Pattern\+Background}} \&)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a89fbd665d405103dc4ba72845e1f04a2}\label{class_obj_cryst_1_1_powder_pattern_background_a89fbd665d405103dc4ba72845e1f04a2}} 
virtual const string \& {\bfseries Get\+Class\+Name} () const
\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a74b0128b9f2c6be0302f67e132ed4aed}{Set\+Parent\+Powder\+Pattern}} (\mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern}{Powder\+Pattern}} \&)
\item 
virtual const Cryst\+Vector\+\_\+\+R\+E\+AL \& \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_aeff3379aae4bd4ff3d6ff353ce8f7f96}{Get\+Powder\+Pattern\+Calc}} () const
\item 
virtual pair$<$ const Cryst\+Vector\+\_\+\+R\+E\+AL $\ast$, const Refinable\+Obj\+Clock $\ast$ $>$ \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_add12004ddfd2cc22d4fe0c52304da709}{Get\+Powder\+Pattern\+Integrated\+Calc}} () const
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_ae68fc3a9883ca45c81a22119c28d9379}\label{class_obj_cryst_1_1_powder_pattern_background_ae68fc3a9883ca45c81a22119c28d9379}} 
void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_ae68fc3a9883ca45c81a22119c28d9379}{Import\+User\+Background}} (const string \&filename)
\begin{DoxyCompactList}\small\item\em Import background points from a file (with two columns 2theta (or tof), intensity) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_afda9ea065efbed3fcfc783060de9b415}\label{class_obj_cryst_1_1_powder_pattern_background_afda9ea065efbed3fcfc783060de9b415}} 
void {\bfseries Set\+Interp\+Points} (const Cryst\+Vector\+\_\+\+R\+E\+AL tth, const Cryst\+Vector\+\_\+\+R\+E\+AL backgd)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_aaf33dff056fd0e0b0c0876217bce1040}\label{class_obj_cryst_1_1_powder_pattern_background_aaf33dff056fd0e0b0c0876217bce1040}} 
const std\+::pair$<$ const Cryst\+Vector\+\_\+\+R\+E\+AL $\ast$, const Cryst\+Vector\+\_\+\+R\+E\+AL $\ast$ $>$ {\bfseries Get\+Interp\+Points} () const
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a66d1d585be7efa8d106d322ba94bef7b}\label{class_obj_cryst_1_1_powder_pattern_background_a66d1d585be7efa8d106d322ba94bef7b}} 
virtual void {\bfseries X\+M\+L\+Output} (ostream \&os, int indent=0) const
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_af854b053de7dd03c68fd7b4b14132177}\label{class_obj_cryst_1_1_powder_pattern_background_af854b053de7dd03c68fd7b4b14132177}} 
virtual void {\bfseries X\+M\+L\+Input} (istream \&is, const X\+M\+L\+Cryst\+Tag \&tag)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a6948dbcc1d4c17de5de063625e73da05}\label{class_obj_cryst_1_1_powder_pattern_background_a6948dbcc1d4c17de5de063625e73da05}} 
virtual void {\bfseries Get\+Gene\+Group} (const Refinable\+Obj \&obj, Cryst\+Vector\+\_\+uint \&group\+Index, unsigned int \&first\+Group) const
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a5bd1253bc1a4bd1e1a6e6459c670fd52}\label{class_obj_cryst_1_1_powder_pattern_background_a5bd1253bc1a4bd1e1a6e6459c670fd52}} 
virtual void {\bfseries Begin\+Optimization} (const bool allow\+Approximations=false, const bool enable\+Restraints=false)
\item 
virtual const Cryst\+Vector\+\_\+\+R\+E\+AL \& \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a75c931bd3e0370e7434f75d70ba51295}{Get\+Powder\+Pattern\+Calc\+Variance}} () const
\item 
virtual pair$<$ const Cryst\+Vector\+\_\+\+R\+E\+AL $\ast$, const Refinable\+Obj\+Clock $\ast$ $>$ \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a8ccebd7f0a71a7994c60b6efb2b8ebc7}{Get\+Powder\+Pattern\+Integrated\+Calc\+Variance}} () const
\item 
virtual bool \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a126f036fe66797c52c7e362663925ad9}{Has\+Powder\+Pattern\+Calc\+Variance}} () const
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a24eccd49871bb628f2c32a2a0f98c67a}\label{class_obj_cryst_1_1_powder_pattern_background_a24eccd49871bb628f2c32a2a0f98c67a}} 
virtual void {\bfseries Tag\+New\+Best\+Config} () const
\item 
void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a0735ae2350ebce9320ebc2fd16dd94be}{Optimize\+Bayesian\+Background}} ()
\item 
void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a874e0bed05f17df53ad6ddd3df989dc9}{Fix\+Parameters\+Beyond\+Maxresolution}} (Refinable\+Obj \&obj)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a6e564159536442870bfb17be8e5b51e8}{Calc\+Powder\+Pattern}} () const
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a000973298590f39e8bd62d29e7d724c9}\label{class_obj_cryst_1_1_powder_pattern_background_a000973298590f39e8bd62d29e7d724c9}} 
virtual void {\bfseries Calc\+Powder\+Pattern\+\_\+\+Full\+Deriv} (std\+::set$<$ Refinable\+Par $\ast$ $>$ \&v\+Par)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a4f103bc44b507ce87d82816626871fb0}\label{class_obj_cryst_1_1_powder_pattern_background_a4f103bc44b507ce87d82816626871fb0}} 
virtual void {\bfseries Calc\+Powder\+Pattern\+Integrated} () const
\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a044838d76b1878a029d587480636e80e}{Calc\+Powder\+Pattern\+Integrated\+\_\+\+Full\+Deriv}} (std\+::set$<$ Refinable\+Par $\ast$ $>$ \&v\+Par)
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_acede73f7ce7199fb37a2946334567bd9}\label{class_obj_cryst_1_1_powder_pattern_background_acede73f7ce7199fb37a2946334567bd9}} 
virtual void {\bfseries Prepare} ()
\item 
virtual const Cryst\+Vector\+\_\+long \& \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_ae75d135c8faa3aa4e0d7e145d848e8a1}{Get\+Bragg\+Limits}} () const
\item 
virtual void \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a3d1c345df8269ff883bd3b6f82b57d57}{Set\+Max\+Sin\+Theta\+Ov\+Lambda}} (const R\+E\+AL max)
\begin{DoxyCompactList}\small\item\em exist but are ignored for all calculations. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a5ec5ac4fd9ac7247fdb29c1b40e4369b}\label{class_obj_cryst_1_1_powder_pattern_background_a5ec5ac4fd9ac7247fdb29c1b40e4369b}} 
void {\bfseries Init\+Ref\+Par\+List} ()
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a9546d8c2c1de47d8eea570f20ab45bcb}\label{class_obj_cryst_1_1_powder_pattern_background_a9546d8c2c1de47d8eea570f20ab45bcb}} 
void {\bfseries Init\+Options} ()
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_aa1aa5762ecafec82b1c3dba85506240d}\label{class_obj_cryst_1_1_powder_pattern_background_aa1aa5762ecafec82b1c3dba85506240d}} 
void {\bfseries Init\+Spline} () const
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a1b41334ecbbbe337121f6041b7068e99}\label{class_obj_cryst_1_1_powder_pattern_background_a1b41334ecbbbe337121f6041b7068e99}} 
int \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a1b41334ecbbbe337121f6041b7068e99}{m\+Background\+Nb\+Point}}
\begin{DoxyCompactList}\small\item\em Number of fitting points for background. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a68740ba9e8c4348e2a6b2d96024436eb}\label{class_obj_cryst_1_1_powder_pattern_background_a68740ba9e8c4348e2a6b2d96024436eb}} 
Cryst\+Vector\+\_\+\+R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a68740ba9e8c4348e2a6b2d96024436eb}{m\+Background\+Interp\+PointX}}
\begin{DoxyCompactList}\small\item\em Vector of 2theta values for the fitting points of the background. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a942a33452d66e00cd155743a9c8c21e2}\label{class_obj_cryst_1_1_powder_pattern_background_a942a33452d66e00cd155743a9c8c21e2}} 
Cryst\+Vector\+\_\+\+R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a942a33452d66e00cd155743a9c8c21e2}{m\+Background\+Interp\+Point\+Intensity}}
\begin{DoxyCompactList}\small\item\em Values of background at interpolating points. \end{DoxyCompactList}\item 
Cryst\+Vector\+\_\+long \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a1280a4f46ff6ba37182878507fab21f4}{m\+Point\+Order}}
\item 
Cryst\+Vector\+\_\+\+R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a16f3af868232f0bbe8c4884ec1676518}{mv\+Spline\+Pixel}}
\item 
Cubic\+Spline \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a671b5004d363af3cd7efbe97b488ac33}{mv\+Spline}}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_ae26867d298bf99ee07d196b5636a144f}\label{class_obj_cryst_1_1_powder_pattern_background_ae26867d298bf99ee07d196b5636a144f}} 
Refinable\+Obj\+Clock \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_ae26867d298bf99ee07d196b5636a144f}{m\+Clock\+Background\+Point}}
\begin{DoxyCompactList}\small\item\em Modification of the interpolated points. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_af2988bbeae93a4ebe62161bfb136a859}\label{class_obj_cryst_1_1_powder_pattern_background_af2988bbeae93a4ebe62161bfb136a859}} 
Refinable\+Obj\+Clock \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_af2988bbeae93a4ebe62161bfb136a859}{m\+Clock\+Spline}}
\begin{DoxyCompactList}\small\item\em Initialization of the spline. \end{DoxyCompactList}\item 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_aca05bc94a86a737d8b744704478c2c24}{m\+Max\+Sin\+Theta\+Ov\+Lambda}}
\item 
R\+E\+AL \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_afb62b2f85e9bab627f14265830d1ff09}{m\+Model\+Variance}}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a8dcbfb135b47ce820d7a6500818c84fd}\label{class_obj_cryst_1_1_powder_pattern_background_a8dcbfb135b47ce820d7a6500818c84fd}} 
Ref\+Obj\+Opt \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_a8dcbfb135b47ce820d7a6500818c84fd}{m\+Interpolation\+Model}}
\begin{DoxyCompactList}\small\item\em Type of interpolation performed\+: linear or cubic spline. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a7b7565a5c419f2d4753446ff094a44cb}\label{class_obj_cryst_1_1_powder_pattern_background_a7b7565a5c419f2d4753446ff094a44cb}} 
class {\bfseries Powder\+Pattern}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Phase to compute a background contribution to a powder pattern using an interpolation. Currently only linear interpolation is available. (in the works\+: cubic spline interpolation background) 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a6e564159536442870bfb17be8e5b51e8}\label{class_obj_cryst_1_1_powder_pattern_background_a6e564159536442870bfb17be8e5b51e8}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!CalcPowderPattern@{CalcPowderPattern}}
\index{CalcPowderPattern@{CalcPowderPattern}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{CalcPowderPattern()}{CalcPowderPattern()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Calc\+Powder\+Pattern (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Calc the powder pattern. As always, recomputation is only done if necessary (ie if a parameter has changed since the last computation) 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a8417ecb93009a9b7b9fccf074a9438d9}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a6e564159536442870bfb17be8e5b51e8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a6e564159536442870bfb17be8e5b51e8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a044838d76b1878a029d587480636e80e}\label{class_obj_cryst_1_1_powder_pattern_background_a044838d76b1878a029d587480636e80e}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!CalcPowderPatternIntegrated\_FullDeriv@{CalcPowderPatternIntegrated\_FullDeriv}}
\index{CalcPowderPatternIntegrated\_FullDeriv@{CalcPowderPatternIntegrated\_FullDeriv}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{CalcPowderPatternIntegrated\_FullDeriv()}{CalcPowderPatternIntegrated\_FullDeriv()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Calc\+Powder\+Pattern\+Integrated\+\_\+\+Full\+Deriv (\begin{DoxyParamCaption}\item[{std\+::set$<$ Refinable\+Par $\ast$ $>$ \&}]{v\+Par }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Calc the integrated powder pattern. This should be optimized so that the full powder pattern is not explicitely computed. 

Reimplemented from \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a7825422fec4a6ee5f1a00bc4063104ef}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a044838d76b1878a029d587480636e80e_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a874e0bed05f17df53ad6ddd3df989dc9}\label{class_obj_cryst_1_1_powder_pattern_background_a874e0bed05f17df53ad6ddd3df989dc9}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!FixParametersBeyondMaxresolution@{FixParametersBeyondMaxresolution}}
\index{FixParametersBeyondMaxresolution@{FixParametersBeyondMaxresolution}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{FixParametersBeyondMaxresolution()}{FixParametersBeyondMaxresolution()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Fix\+Parameters\+Beyond\+Maxresolution (\begin{DoxyParamCaption}\item[{Refinable\+Obj \&}]{obj }\end{DoxyParamCaption})}

Fix parameters corresponding to points of the pattern that are not actually calculated. This is necessary for modelling using splines, to avoid divergence of interpolation points during least squares optimization.


\begin{DoxyParams}{Parameters}
{\em obj} & the object in which are parameters to be fixed. Normally this will be the \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background}{Powder\+Pattern\+Background}} object itself, but it can also be the parameter list copied such as in a L\+S\+Q\+Num\+Obj. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a874e0bed05f17df53ad6ddd3df989dc9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_ae75d135c8faa3aa4e0d7e145d848e8a1}\label{class_obj_cryst_1_1_powder_pattern_background_ae75d135c8faa3aa4e0d7e145d848e8a1}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!GetBraggLimits@{GetBraggLimits}}
\index{GetBraggLimits@{GetBraggLimits}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{GetBraggLimits()}{GetBraggLimits()}}
{\footnotesize\ttfamily const Cryst\+Vector\+\_\+long \& Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Get\+Bragg\+Limits (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}

Get the pixel positions separating the integration intervals around reflections.

\begin{DoxyReturn}{Returns}
\+: an array with the pixel positions, empty if this component has no peaks. The positions should be in increasing order, but could go beyond the pattern limits. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a727488f859528b0a9b5da47973804e01}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_aeff3379aae4bd4ff3d6ff353ce8f7f96}\label{class_obj_cryst_1_1_powder_pattern_background_aeff3379aae4bd4ff3d6ff353ce8f7f96}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!GetPowderPatternCalc@{GetPowderPatternCalc}}
\index{GetPowderPatternCalc@{GetPowderPatternCalc}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{GetPowderPatternCalc()}{GetPowderPatternCalc()}}
{\footnotesize\ttfamily const Cryst\+Vector\+\_\+\+R\+E\+AL \& Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Get\+Powder\+Pattern\+Calc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

Get the calculated powder pattern for this component. Note that the pattern is {\itshape not} scaled. 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a45258e9f9b44ff019bf53aa3dfb1a305}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_aeff3379aae4bd4ff3d6ff353ce8f7f96_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_aeff3379aae4bd4ff3d6ff353ce8f7f96_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a75c931bd3e0370e7434f75d70ba51295}\label{class_obj_cryst_1_1_powder_pattern_background_a75c931bd3e0370e7434f75d70ba51295}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!GetPowderPatternCalcVariance@{GetPowderPatternCalcVariance}}
\index{GetPowderPatternCalcVariance@{GetPowderPatternCalcVariance}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{GetPowderPatternCalcVariance()}{GetPowderPatternCalcVariance()}}
{\footnotesize\ttfamily const Cryst\+Vector\+\_\+\+R\+E\+AL \& Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Get\+Powder\+Pattern\+Calc\+Variance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

Get the variance associated to each point of the calculated powder pattern, for this component.

\begin{DoxyWarning}{Warning}
\+: this is experimental, with the aim of using Maximum Likelihood to improve structure determination. 
\end{DoxyWarning}


Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_ad67b39669fd0d336b01937ee81a59ddc}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a75c931bd3e0370e7434f75d70ba51295_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_add12004ddfd2cc22d4fe0c52304da709}\label{class_obj_cryst_1_1_powder_pattern_background_add12004ddfd2cc22d4fe0c52304da709}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!GetPowderPatternIntegratedCalc@{GetPowderPatternIntegratedCalc}}
\index{GetPowderPatternIntegratedCalc@{GetPowderPatternIntegratedCalc}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{GetPowderPatternIntegratedCalc()}{GetPowderPatternIntegratedCalc()}}
{\footnotesize\ttfamily pair$<$ const Cryst\+Vector\+\_\+\+R\+E\+AL $\ast$, const Refinable\+Obj\+Clock $\ast$ $>$ Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Get\+Powder\+Pattern\+Integrated\+Calc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

Get the integrated values of the powder pattern

\begin{DoxyNote}{Note}
\+: the integration intervals are those given by the parent \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern}{Powder\+Pattern}}, so that all \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component}{Powder\+Pattern\+Component}}\textquotesingle{}s intervals are taken into account
\end{DoxyNote}
This avoids explicitely calculating the full profile powder pattern. 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_ac54b7ae5a177492de681afc2cbed72eb}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_add12004ddfd2cc22d4fe0c52304da709_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a8ccebd7f0a71a7994c60b6efb2b8ebc7}\label{class_obj_cryst_1_1_powder_pattern_background_a8ccebd7f0a71a7994c60b6efb2b8ebc7}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!GetPowderPatternIntegratedCalcVariance@{GetPowderPatternIntegratedCalcVariance}}
\index{GetPowderPatternIntegratedCalcVariance@{GetPowderPatternIntegratedCalcVariance}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{GetPowderPatternIntegratedCalcVariance()}{GetPowderPatternIntegratedCalcVariance()}}
{\footnotesize\ttfamily pair$<$ const Cryst\+Vector\+\_\+\+R\+E\+AL $\ast$, const Refinable\+Obj\+Clock $\ast$ $>$ Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Get\+Powder\+Pattern\+Integrated\+Calc\+Variance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

Get the variance associated to each point of the calculated powder pattern, for this component (integrated version).

\begin{DoxyWarning}{Warning}
\+: this is experimental, with the aim of using Maximum Likelihood to improve structure determination. 
\end{DoxyWarning}


Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_ae721bd290b50aa9503bac419616a21c6}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a126f036fe66797c52c7e362663925ad9}\label{class_obj_cryst_1_1_powder_pattern_background_a126f036fe66797c52c7e362663925ad9}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!HasPowderPatternCalcVariance@{HasPowderPatternCalcVariance}}
\index{HasPowderPatternCalcVariance@{HasPowderPatternCalcVariance}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{HasPowderPatternCalcVariance()}{HasPowderPatternCalcVariance()}}
{\footnotesize\ttfamily bool Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Has\+Powder\+Pattern\+Calc\+Variance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

Does this component have a variance associated with each calculated point ? i.\+e., do we use maximum likelihood to take into account incomplete models ? 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a773d077df9d066f3d15631ec84ca15fd}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a0735ae2350ebce9320ebc2fd16dd94be}\label{class_obj_cryst_1_1_powder_pattern_background_a0735ae2350ebce9320ebc2fd16dd94be}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!OptimizeBayesianBackground@{OptimizeBayesianBackground}}
\index{OptimizeBayesianBackground@{OptimizeBayesianBackground}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{OptimizeBayesianBackground()}{OptimizeBayesianBackground()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Optimize\+Bayesian\+Background (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Optimize the background using a Bayesian approach. The background parameters must be un-\/fixed before.

The minimization will a maximum of 50 Simplex runs (see the Simplex\+Obj documentation), each with 200 cycles.

See the class documentation for \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_background_bayesian_minimiser}{Powder\+Pattern\+Background\+Bayesian\+Minimiser}}. Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a0735ae2350ebce9320ebc2fd16dd94be_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a3d1c345df8269ff883bd3b6f82b57d57}\label{class_obj_cryst_1_1_powder_pattern_background_a3d1c345df8269ff883bd3b6f82b57d57}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!SetMaxSinThetaOvLambda@{SetMaxSinThetaOvLambda}}
\index{SetMaxSinThetaOvLambda@{SetMaxSinThetaOvLambda}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{SetMaxSinThetaOvLambda()}{SetMaxSinThetaOvLambda()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Set\+Max\+Sin\+Theta\+Ov\+Lambda (\begin{DoxyParamCaption}\item[{const R\+E\+AL}]{max }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



exist but are ignored for all calculations. 

Set the maximum value for sin(theta)/lambda. All data above still 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a4731b5a64ee9aab6779e2ef323242fe5}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a74b0128b9f2c6be0302f67e132ed4aed}\label{class_obj_cryst_1_1_powder_pattern_background_a74b0128b9f2c6be0302f67e132ed4aed}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!SetParentPowderPattern@{SetParentPowderPattern}}
\index{SetParentPowderPattern@{SetParentPowderPattern}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{SetParentPowderPattern()}{SetParentPowderPattern()}}
{\footnotesize\ttfamily void Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::\+Set\+Parent\+Powder\+Pattern (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern}{Powder\+Pattern}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Set the \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern}{Powder\+Pattern}} object which uses this component. This sets all necessary pattern parameters (2theta/tof range, wavelength, radiation type...) accordingly. 

Implements \mbox{\hyperlink{class_obj_cryst_1_1_powder_pattern_component_a6b3dc911118c280dbbdcb7fb97acf980}{Obj\+Cryst\+::\+Powder\+Pattern\+Component}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_obj_cryst_1_1_powder_pattern_background_a74b0128b9f2c6be0302f67e132ed4aed_cgraph}
\end{center}
\end{figure}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_aca05bc94a86a737d8b744704478c2c24}\label{class_obj_cryst_1_1_powder_pattern_background_aca05bc94a86a737d8b744704478c2c24}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!mMaxSinThetaOvLambda@{mMaxSinThetaOvLambda}}
\index{mMaxSinThetaOvLambda@{mMaxSinThetaOvLambda}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{mMaxSinThetaOvLambda}{mMaxSinThetaOvLambda}}
{\footnotesize\ttfamily R\+E\+AL Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::m\+Max\+Sin\+Theta\+Ov\+Lambda\hspace{0.3cm}{\ttfamily [protected]}}

Maximum sin(theta)/lambda for all calculations (10 by default).

This keeps all data in memory, but only the part which is below the max is calculated. \mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_afb62b2f85e9bab627f14265830d1ff09}\label{class_obj_cryst_1_1_powder_pattern_background_afb62b2f85e9bab627f14265830d1ff09}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!mModelVariance@{mModelVariance}}
\index{mModelVariance@{mModelVariance}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{mModelVariance}{mModelVariance}}
{\footnotesize\ttfamily R\+E\+AL Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::m\+Model\+Variance\hspace{0.3cm}{\ttfamily [protected]}}

Constant error (sigma) on the calculated pattern, due to an incomplete model \mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a1280a4f46ff6ba37182878507fab21f4}\label{class_obj_cryst_1_1_powder_pattern_background_a1280a4f46ff6ba37182878507fab21f4}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!mPointOrder@{mPointOrder}}
\index{mPointOrder@{mPointOrder}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{mPointOrder}{mPointOrder}}
{\footnotesize\ttfamily Cryst\+Vector\+\_\+long Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::m\+Point\+Order\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}

Subscript of the points, sorted the correct order, taking into account the type of radiation (monochromatic/\+T\+OF). \mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a671b5004d363af3cd7efbe97b488ac33}\label{class_obj_cryst_1_1_powder_pattern_background_a671b5004d363af3cd7efbe97b488ac33}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!mvSpline@{mvSpline}}
\index{mvSpline@{mvSpline}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{mvSpline}{mvSpline}}
{\footnotesize\ttfamily Cubic\+Spline Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::mv\+Spline\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}

Spline used for interpolation. Mutable since it copies information from m\+Background\+Interp\+PointX and m\+Background\+Interp\+Point\+Intensity. \mbox{\Hypertarget{class_obj_cryst_1_1_powder_pattern_background_a16f3af868232f0bbe8c4884ec1676518}\label{class_obj_cryst_1_1_powder_pattern_background_a16f3af868232f0bbe8c4884ec1676518}} 
\index{ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}!mvSplinePixel@{mvSplinePixel}}
\index{mvSplinePixel@{mvSplinePixel}!ObjCryst::PowderPatternBackground@{ObjCryst::PowderPatternBackground}}
\subsubsection{\texorpdfstring{mvSplinePixel}{mvSplinePixel}}
{\footnotesize\ttfamily Cryst\+Vector\+\_\+\+R\+E\+AL Obj\+Cryst\+::\+Powder\+Pattern\+Background\+::mv\+Spline\+Pixel\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}

Vector of pixel values between each interval, for faster Cubic\+Spline calculations. Mutable since it copies information from m\+Background\+Interp\+PointX. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Powder\+Pattern.\+h\item 
I\+O.\+cpp\item 
Powder\+Pattern.\+cpp\end{DoxyCompactItemize}
